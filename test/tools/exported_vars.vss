# Common bash variables exported to the bash script and bash post script of DMD's testsuite

export TEST_DIR $1 # TEST_DIR should be one of compilable, fail_compilation or runnable
export TEST_NAME $2 # name of the test, e.g. test12345

export RESULTS_TEST_DIR ${RESULTS_DIR}/${TEST_DIR} # reference to the resulting test_dir folder, e.g .test_results/runnable
export OUTPUT_BASE ${RESULTS_TEST_DIR}/${TEST_NAME} # reference to the resulting files without a suffix, e.g. test_results/runnable/test123
export EXTRA_FILES ${TEST_DIR}/extra-files # reference to the extra files directory

export LC_ALL C #otherwise objdump localizes its output

if [ "$OS" == "win32" ]
    export LIBEXT .lib
elif [ "$OS" == "win64" ]
    export LIBEXT .lib
else
    export LIBEXT .a
fi

if [ "$OS" == "win32" ]
    export SOEXT .dll
elif [ "$OS" == "win64" ]
    export SOEXT .dll
elif [ "$OS" = "osx" ]
    export SOEXT .dylib
else
    export SOEXT .so
fi

# Default to DigitalMars C++ on Win32
if [ "$opt.CC" == "" ]
    if [ "$OS" == "win32" ]
        export CC "dmc"
    else
        export CC "c++"
    fi
fi
